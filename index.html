<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>KinkCompass & Style Finder</title> <!-- Updated Title -->
  <link rel="stylesheet" href="styles.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- Confetti script for Style Finder result -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
</head>
<body>
  <header>
    <h1>ğŸŒ¸ KinkCompass ğŸŒ¸</h1>
    <nav class="header-nav">
        <!-- Added Style Finder Trigger -->
        <button id="style-finder-trigger-btn" class="header-btn" title="Find Your Kink Style!">ğŸ§­ Style Finder</button>
        <!-- Other header buttons -->
        <button id="style-discovery-btn" class="header-btn" title="Explore All Styles">ğŸ”­ Explore</button> <!-- Changed Icon -->
        <button id="glossary-btn" class="header-btn" title="Kink Glossary">ğŸ“š Glossary</button>
        <button id="resources-btn" class="header-btn" title="Helpful Resources">ğŸ”— Resources</button>
        <button id="themes-btn" class="header-btn" title="Change Theme">ğŸ¨ Themes</button>
        <button id="export-btn" class="header-btn" title="Export Data">ğŸ’¾ Export</button>
        <button id="import-btn" class="header-btn" title="Import Data">ğŸ“ Import</button>
        <input type="file" id="import-file-input" accept=".json" style="display: none;" />
        <button id="theme-toggle" class="header-btn theme-btn" title="Toggle light/dark mode">ğŸŒ™</button>
    </nav>
  </header>

  <main class="container">
    <!-- KinkCompass Main Form Section -->
    <section id="form-section" class="form-section card">
      <h2>âœ¨ Your Kinky Persona âœ¨</h2>
      <div class="field-group avatar-group">
        <fieldset class="avatar-picker-fieldset">
            <legend>Avatar:</legend>
            <div class="avatar-picker">
                <span id="avatar-display" aria-hidden="true">â“</span>
                <input type="hidden" id="avatar-input" value="â“">
                <button class="avatar-btn" data-emoji="ğŸ€" aria-label="Ribbon">ğŸ€</button>
                <button class="avatar-btn" data-emoji="âœ¨" aria-label="Sparkles">âœ¨</button>
                <button class="avatar-btn" data-emoji="ğŸ’–" aria-label="Sparkling Heart">ğŸ’–</button>
                <button class="avatar-btn" data-emoji="ğŸ”¥" aria-label="Fire">ğŸ”¥</button>
                <button class="avatar-btn" data-emoji="ğŸ˜ˆ" aria-label="Devil">ğŸ˜ˆ</button>
                <button class="avatar-btn" data-emoji="ğŸ˜‡" aria-label="Angel">ğŸ˜‡</button>
                <button class="avatar-btn" data-emoji="ğŸ¶" aria-label="Dog">ğŸ¶</button>
                <button class="avatar-btn" data-emoji="ğŸ¦Š" aria-label="Fox">ğŸ¦Š</button>
                <button class="avatar-btn" data-emoji="ğŸ‘‘" aria-label="Crown">ğŸ‘‘</button>
            </div>
        </fieldset>
      </div>
      <div class="field-group"> <label for="name">Name</label> <input type="text" id="name" placeholder="Who are you?" autocomplete="name" /> </div>
      <div class="field-group"> <label for="role">Role</label> <select id="role" autocomplete="off"><option value="dominant">Dominant</option><option value="submissive" selected>Submissive</option></select> </div>
      <div class="field-group"> <label for="style">Style</label> <select id="style" autocomplete="off"><option value="">Pick flavor!</option></select> </div>
      <div class="field-group"> <label>Goals</label> <p class="muted-text">(Goals in details)</p> </div>
      <div id="traits-container"> <p class="muted-text">Select Role & Style...</p> </div>
      <div id="trait-info-popup" class="trait-info-popup card" style="display:none;"> <button id="trait-info-close" class="modal-close">Ã—</button> <h4 id="trait-info-title">Trait Info</h4> <div id="trait-info-body"></div> </div>
      <div class="form-actions"> <button id="save" class="save-btn">Save Sparkle! ğŸ’–</button> <button id="clear-form" class="clear-btn">Clear ğŸ§¹</button> </div>
    </section>

    <!-- KinkCompass List Section -->
    <section class="list-section card"> <h2>ğŸŒŸ Kinky Crew</h2> <ul id="people-list"><li>Loading...</li></ul> </section>

    <!-- KinkCompass Preview Section -->
    <section class="preview-section card"> <h2>ğŸˆ Live Peek!</h2> <div id="live-preview"><p>Fill form! ğŸŒˆ</p></div> </section>
  </main>

  <!-- KinkCompass Modals (Detail, Resources, Glossary, Style Discovery, Themes) -->
  <div class="modal" id="detail-modal" style="display:none;"> <div class="modal-content card"> <button class="modal-close" id="modal-close">Ã—</button> <div id="modal-body"></div> </div> </div>
  <div class="modal" id="resources-modal" style="display:none;"> <div class="modal-content card"> <button class="modal-close" id="resources-close">Ã—</button> <h2 id="resources-modal-title">ğŸ”— Resources</h2> <dl> <!-- Expanded content here --> </dl> <hr><p><em>Disclaimer...</em></p> </div> </div>
  <div class="modal" id="glossary-modal" style="display:none;"> <div class="modal-content card"> <button class="modal-close" id="glossary-close">Ã—</button> <h2>ğŸ“š Glossary</h2> <div id="glossary-body"><p>Loading...</p></div> </div> </div>
  <div class="modal" id="style-discovery-modal" style="display:none;"> <div class="modal-content card wide-modal"> <button class="modal-close" id="style-discovery-close">Ã—</button> <h2>ğŸ§­ Explore Styles</h2> <div class="style-discovery-controls"> <label for="style-discovery-role">Filter:</label> <select id="style-discovery-role"><option value="all">All</option><option value="submissive">Sub</option><option value="dominant">Dom</option></select> </div> <div id="style-discovery-body"><p>Loading...</p></div> </div> </div>
  <div class="modal" id="themes-modal" style="display:none;"> <div class="modal-content card"> <button class="modal-close" id="themes-close">Ã—</button> <h2>ğŸ¨ Themes</h2> <div id="themes-body" class="theme-options"> <button class="theme-option-btn" data-theme="light">ğŸŒ¸ Light</button> <button class="theme-option-btn" data-theme="dark">ğŸŒ™ Dark</button> <button class="theme-option-btn" data-theme="pastel">ğŸ¬ Pastel</button> <button class="theme-option-btn" data-theme="velvet">ğŸ’œ Velvet</button> </div> </div> </div>

  <!-- *** NEW: Style Finder Modal *** -->
  <div id="style-finder-modal" class="modal sf-modal"> <!-- Added sf-modal class -->
    <div class="modal-content sf-modal-content"> <!-- Added sf-modal-content class -->
      <button class="modal-close" id="sf-close-style-finder">Ã—</button> <!-- Prefixed ID -->
      <h3>ğŸ§­ BDSM Style Finder ğŸ§­</h3>
      <div id="sf-progress-tracker" class="sf-progress-tracker"></div> <!-- Prefixed ID -->
      <div id="sf-step-content"></div> <!-- Prefixed ID -->
      <p id="sf-feedback" class="sf-feedback"></p> <!-- Prefixed ID -->
      <div id="sf-dashboard" class="sf-dashboard"></div> <!-- Prefixed ID -->
    </div>
  </div>
  <!-- *** END Style Finder Modal *** -->


  <footer> <p>KinkCompass - Navigate your desires âœ¨</p> </footer>

  <!-- Load JS modules last -->
  <script type="module" src="glossary.js"></script>
  <script type="module" src="prompts.js"></script>
  <script type="module" src="achievements.js"></script>
  <script type="module" src="app.js"></script> <!-- app.js now contains ALL logic -->
</body>
</html>
